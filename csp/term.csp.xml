<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<CSP name="term.csp" application="/csp/glossary/" default="1"><![CDATA[
<!doctype html>
<html ng-app>
<head>
<meta charset="utf-8">
	<title>Term</title>
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">

</head>
<!--<style type="text/css">

	.block1 {
			height:50px;
			background:magenta;
	       }

	
</style> -->
<script language ="javascript"> 

	// здесь обработчики будут
function control ($scope,$http){
		   
		    
		 $scope.getTerm=function(termid){
		
			$http.get("/rest/json/term/"+termid).success(function(data){
			$scope.terms=data.children;}).error(function(data,status){
			$scope.alertzone="["+status+"] Ошибка загрузки термина :( ["+data+"]"; });
//			$scope.alertzone==data.children[0].Name;
		    }   
		     $scope.getTerm(#($Get(%request.Data("id",1),1))#);
		     
		     //  добавление термина. Язык - английский или русский
	    	$scope.addTerm = function (term){

		    // что б кашэ был в курсе что мы ему предлагаем
		    term.class="Word.Term";
		    $http.post("/rest/json/term",term, {headers: { 'Content-Type': 'application/json; charset=utf-8'}})
		    .success(function(data){$scope.getTerms();$scope.alertzone="Добавили!!!"+term.Name;}).error(function(data,status){
			$scope.alertzone="["+status+"] Ошибка добавления перевода:( ["+data+"]"; });
		    } 

 }//control

</script>

<body  ng-controller="control">
<h1 ng-model="alertzone"><font color=red>{{alertzone}}</font></h1>
<CSP:INCLUDE PAGE="menu.csp"> 
<div class="container">
<!---->
<h1 ng-hide="true">
</h1>
	    <div class="row">
	    <article class="span12">
				<p>
				<ul class='nav nav-tabs nav-stacked'>
				
				
				<H2><br>{{terms[0].EnglishName}} - {{terms[0].Name}}<br></H2> 
				{{terms[0].Definition}} <br>
				Official: {{terms[0].Official}} <br>
				Rating: {{terms[0].Rating}} <br>
				<a href='{{terms[0].FurtherRead}}'>Further Reading</a> <br>
				
				
				<hr>
				
				<ul class="addTranslation"> 
					<button ng-click="showState=!showState" class="btn">Добавить перевод</button> <br>
					<form ng-show="showState" name="AddTermForm" ng-model="term" 
						  		ng-submit="term.EnglishName='{{terms[0].EnglishName}}'; 
						  		term.Rating='0'; term.Official='0'; addTerm(term);  
						 		term.$setPristine();">
						<H3>{{terms[0].EnglishName}}</H3>
						<select ng-model="term.LanguageTr">
							<option>English</option>
							<option>Русский</option>
						</select> <br>
						<input type="text" placeholder="Перевод" ng-model="term.Name" required/> <br>
						<textarea class="span6" rows="3" ng-model="term.Definition" placeholder="Определение" required></textarea> <br>
						<input type="text" placeholder="Контекст" ng-model="term.Context"/> <br>
						<input type="text" placeholder="Доп. информация" ng-model="term.FurtherRead"/> <br>
						<input type="submit" class="btn" value="Добавить"/>
					</form>
				</ul>
				
				
			
				</li>
				</ul>
				
				</p>
				
			</article>
	    </div>
	    
		
		<div id="footer">
			<div class=""></div>
			
		</div>
		
		
	</div>

    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="bootstrap/js/jquery.js"></script>
    <!-- ОООЧЕНЬ медленно
    <script src="http://code.jquery/jquery-latest.js"></script>	-->
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
    <script src="bootstrap/js/angular-cookies.min.js"></script>
    <script src="bootstrap/js/angular-loader.min.js"></script>
    <script src="bootstrap/js/angular-bootstrap-prettify.min.js"></script>
    <script src="bootstrap/js/angular-bootstrap.min.js"></script>
    <script src="bootstrap/js/angular-cookies.min.js"></script>
    <script src="bootstrap/js/angular-loader.min.js"></script>
    <script src="bootstrap/js/angular-resource.min.js"></script>
    <script src="bootstrap/js/angular-sanitize.min.js"></script>
    
</body>
</html></CSP>
]]></CSP>
</Export>
